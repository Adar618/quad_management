#!/bin/sh
set -e
WRAPPER_DIR="$(cd "$(dirname "$0")"; pwd -P)"/.mvn/wrapper
WRAPPER_JAR="$WRAPPER_DIR/maven-wrapper.jar"
PROPS_FILE="$WRAPPER_DIR/maven-wrapper.properties"
if [ ! -f "$WRAPPER_JAR" ]; then
  echo "Downloading Maven Wrapper jar..."
  URL=$(grep -E '^wrapperUrl=' "$PROPS_FILE" | sed 's/wrapperUrl=//')
  mkdir -p "$WRAPPER_DIR"
  if command -v curl >/dev/null 2>&1; then
    curl -fsSL -o "$WRAPPER_JAR" "$URL"
  elif command -v wget >/dev/null 2>&1; then
    wget -q -O "$WRAPPER_JAR" "$URL"
  else
    echo "Error: Need curl or wget to download $URL" >&2
    exit 1
  fi
fi
JAVA_EXE="${JAVA_HOME:+$JAVA_HOME/bin/}java"
[ -x "$JAVA_EXE" ] || JAVA_EXE="java"
exec "$JAVA_EXE" -classpath "$WRAPPER_JAR" org.apache.maven.wrapper.MavenWrapperMain "$@"
